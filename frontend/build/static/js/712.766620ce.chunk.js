"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[712],{9248:function(e,n,r){var t=r(2791),o=r(184),u=function(e,n){var r=e.type,t=e.placeholder;return(0,o.jsx)("input",{ref:n,type:r,placeholder:t})},i=t.forwardRef(u);n.Z=i},1712:function(e,n,r){r.r(n),r.d(n,{default:function(){return w}});var t=r(885),o=r(890),u=r(1614),i=r(3767),a=r(7621),l=r(4554),d=r(6088),c=r(4615),s=r(2791),v=r(5048),f=r(6319),h=r(4165),j=r(5861),m=r(6720).Z.injectEndpoints({endpoints:function(e){return{getJourney:e.query({query:function(e){return"/journey/all".concat(e)}}),addJourney:e.mutation({query:function(e){var n=e.data;e.arg;return{url:"/journey/create",method:"POST",body:n}},onQueryStarted:function(e,n){return(0,j.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.queryFulfilled,n.dispatch;case 1:case"end":return e.stop()}}),e)})))()}}),deleteJourney:e.mutation({query:function(e){var n=e.id;e.url;return{url:"/journey/".concat(n),method:"DELETE"}},onQueryStarted:function(e,n){return(0,j.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.queryFulfilled,n.dispatch;case 1:case"end":return e.stop()}}),e)})))()}})}}}),g=(m.useAddJourneyMutation,m.useDeleteJourneyMutation,m.useGetJourneyQuery),y=r(7577),p=r(9248),x=r(184),w=function(){var e,n,r=(0,v.I0)(),h=function(e,n){var r;return function(t){r&&clearTimeout(r),r=setTimeout((function(){e(t)}),n)}}((function(e){r((0,f.Cs)(e))}),500),j=(0,s.useRef)(null);(0,s.useEffect)((function(){j.current.focus()}),[]);var m=(0,s.useState)(1),w=(0,t.Z)(m,2),Z=w[0],_=w[1],b=(0,v.v9)((function(e){return e.filter})),S="?page=".concat(null===b||void 0===b?void 0:b.journeyPage);S=void 0!==(null===b||void 0===b?void 0:b.journeySearch)||null!==b&&void 0!==b&&b.journeySearch&&null!==b&&void 0!==b&&b.journeyPage?"?keyword=".concat(null===b||void 0===b?void 0:b.journeySearch,"&page=").concat(null===b||void 0===b?void 0:b.journeyPage):"?page=".concat(null===b||void 0===b?void 0:b.journeyPage);var D=g(S),N=D.data,C=D.isLoading,F=[{field:"_id",headerName:"ID",winWidth:100,flex:.2,renderCell:function(e){var n;return(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(o.Z,{children:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n._id).slice(15)})})}},{field:"departure_station_name",headerName:"Departure Name",winWidth:120,flex:.3},{field:"return_station_name",headerName:"Return Name",winWidth:120,flex:.3},{field:"covered_distance",headerName:"Distance (Km)",winWidth:120,flex:.2,renderCell:function(e){var n;return(0,x.jsx)(s.Fragment,{children:(0,x.jsxs)(o.Z,{children:[(0,y.Gj)(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.covered_distance).toFixed(1)," Km"]})})}},{field:"duration",headerName:"Duration (s)",winWidth:100,flex:.2,renderCell:function(e){var n;return(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(o.Z,{children:(0,y.sX)(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.duration)})})}},{field:"departure",headerName:"Departure Time",winWidth:100,flex:.2,renderCell:function(e){var n;return(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(o.Z,{children:new Date(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.return).toLocaleDateString()})})}},{field:"return",headerName:"Return Time",winWidth:100,flex:.2,renderCell:function(e){var n;return(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(o.Z,{children:new Date(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.return).toLocaleDateString()})})}}];return(0,x.jsxs)(u.Z,{children:[(0,x.jsx)("div",{className:"journey-page--search-section",children:(0,x.jsx)("form",{action:"",onSubmit:function(e){return e.preventDefault()},children:(0,x.jsxs)("div",{className:"journey-page--search-section--div",children:[(0,x.jsx)(p.Z,{ref:j,type:"search",placeholder:"search by departure station name",onChange:function(e){var n=e.target;return h(n.value)},onBlur:function(e){var n=e.target;return h(n.value)}}),(0,x.jsx)("button",{type:"submit",children:(0,x.jsx)("i",{className:"fa-solid fa-magnifying-glass"})})]})})}),(0,x.jsx)(i.Z,{direction:"row",alignItems:"center",justifyContent:"center",mb:1,children:(0,x.jsx)(o.Z,{variant:"h5",fontWeight:"bold",color:"#C73866",gutterBottom:!0,children:"Journey list view"})}),(0,x.jsx)(a.Z,{children:(0,x.jsx)(l.Z,{sx:{minHeight:400,width:1},children:(0,x.jsx)(c._,{loading:!(null!==N&&void 0!==N&&null!==(e=N.journey)&&void 0!==e&&e.length)||C,getRowId:function(e){return null===e||void 0===e?void 0:e._id},columns:F,pageSize:100,autoHeight:!0,rows:(null===N||void 0===N?void 0:N.journey)||[]})})}),(0,x.jsx)("div",{className:"station-page--pagination",children:100===(null===N||void 0===N||null===(n=N.journey)||void 0===n?void 0:n.length)?(0,x.jsx)(d.Z,{count:Math.round((null===N||void 0===N?void 0:N.totalJourney)/100)||0,variant:"outlined",color:"primary",page:Z,onChange:function(e,n){_(n),r((0,f.R)(n))}}):""})]})}},7577:function(e,n,r){r.d(n,{Gj:function(){return t},pQ:function(){return u},pi:function(){return a},sX:function(){return o},t4:function(){return i}});var t=function(e){return Math.round(e/100)/10},o=function(e){var n=new Date(null);return n.setSeconds(e),n.toISOString().substr(11,8)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.covered_distance)}),0),r=(t(n)/(null===e||void 0===e?void 0:e.length)).toFixed(2);return r},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object.values(e.reduce((function(e,n){var r=n.return_station_name;return e[r]=e[r]||{return_station_name:r,count:0},e[r].count++,e}),Object.create(null))),r=[].concat(n).sort((function(e,n){return n.count-e.count}));return null===r||void 0===r?void 0:r.slice(0,5)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log("array",e);var n=Object.values(e.reduce((function(e,n){var r=n.departure_station_name;return e[r]=e[r]||{departure_station_name:r,count:0},e[r].count++,e}),Object.create(null))),r=[].concat(n).sort((function(e,n){return n.count-e.count}));return null===r||void 0===r?void 0:r.slice(0,5)}}}]);
//# sourceMappingURL=712.766620ce.chunk.js.map