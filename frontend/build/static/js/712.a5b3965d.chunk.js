"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[712],{1712:function(n,e,r){r.r(e),r.d(e,{default:function(){return x}});var t=r(885),o=r(890),i=r(1614),u=r(3767),a=r(7621),d=r(4554),l=r(6088),c=r(4615),s=r(2791),v=r(5048),f=r(6319),h=r(4165),j=r(5861),m=r(6720).Z.injectEndpoints({endpoints:function(n){return{getJourney:n.query({query:function(n){return"/journey/all".concat(n)}}),addJourney:n.mutation({query:function(n){var e=n.data;n.arg;return{url:"/journey/create",method:"POST",body:e}},onQueryStarted:function(n,e){return(0,j.Z)((0,h.Z)().mark((function n(){return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.queryFulfilled,e.dispatch;case 1:case"end":return n.stop()}}),n)})))()}}),deleteJourney:n.mutation({query:function(n){var e=n.id;n.url;return{url:"/journey/".concat(e),method:"DELETE"}},onQueryStarted:function(n,e){return(0,j.Z)((0,h.Z)().mark((function n(){return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.queryFulfilled,e.dispatch;case 1:case"end":return n.stop()}}),n)})))()}})}}}),g=(m.useAddJourneyMutation,m.useDeleteJourneyMutation,m.useGetJourneyQuery),y=r(7577),p=r(184),x=function(){var n,e,r=(0,v.I0)(),h=function(n,e){var r;return function(t){r&&clearTimeout(r),r=setTimeout((function(){n(t)}),e)}}((function(n){r((0,f.Cs)(n))}),500),j=(0,s.useState)(1),m=(0,t.Z)(j,2),x=m[0],w=m[1],Z=(0,v.v9)((function(n){return n.filter})),_="?page=".concat(null===Z||void 0===Z?void 0:Z.journeyPage);_=void 0!==(null===Z||void 0===Z?void 0:Z.journeySearch)||null!==Z&&void 0!==Z&&Z.journeySearch&&null!==Z&&void 0!==Z&&Z.journeyPage?"?keyword=".concat(null===Z||void 0===Z?void 0:Z.journeySearch,"&page=").concat(null===Z||void 0===Z?void 0:Z.journeyPage):"?page=".concat(null===Z||void 0===Z?void 0:Z.journeyPage);var b=g(_),S=b.data,D=b.isLoading,N=[{field:"_id",headerName:"ID",winWidth:100,flex:.2,renderCell:function(n){var e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsx)(o.Z,{children:(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e._id).slice(15)})})}},{field:"departure_station_name",headerName:"Departure Name",winWidth:120,flex:.3},{field:"return_station_name",headerName:"Return Name",winWidth:120,flex:.3},{field:"covered_distance",headerName:"Distance (Km)",winWidth:120,flex:.2,renderCell:function(n){var e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsxs)(o.Z,{children:[(0,y.Gj)(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.covered_distance).toFixed(1)," Km"]})})}},{field:"duration",headerName:"Duration (s)",winWidth:100,flex:.2,renderCell:function(n){var e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsx)(o.Z,{children:(0,y.sX)(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.duration)})})}},{field:"departure",headerName:"Departure Time",winWidth:100,flex:.2,renderCell:function(n){var e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsx)(o.Z,{children:new Date(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.return).toLocaleDateString()})})}},{field:"return",headerName:"Return Time",winWidth:100,flex:.2,renderCell:function(n){var e;return(0,p.jsx)(s.Fragment,{children:(0,p.jsx)(o.Z,{children:new Date(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.return).toLocaleDateString()})})}}];return(0,p.jsxs)(i.Z,{children:[(0,p.jsx)("div",{className:"journey-page--search-section",children:(0,p.jsx)("form",{action:"",onSubmit:function(n){return n.preventDefault()},children:(0,p.jsxs)("div",{className:"journey-page--search-section--div",children:[(0,p.jsx)("input",{type:"search",placeholder:"search by departure station name",onChange:function(n){var e=n.target;return h(e.value)},onBlur:function(n){var e=n.target;return h(e.value)}}),(0,p.jsx)("button",{type:"submit",children:(0,p.jsx)("i",{className:"fa-solid fa-magnifying-glass"})})]})})}),(0,p.jsx)(u.Z,{direction:"row",alignItems:"center",justifyContent:"center",mb:1,children:(0,p.jsx)(o.Z,{variant:"h5",fontWeight:"bold",color:"#C73866",gutterBottom:!0,children:"Journey list view"})}),(0,p.jsx)(a.Z,{children:(0,p.jsx)(d.Z,{sx:{minHeight:400,width:1},children:(0,p.jsx)(c._,{loading:!(null!==S&&void 0!==S&&null!==(n=S.journey)&&void 0!==n&&n.length)||D,getRowId:function(n){return null===n||void 0===n?void 0:n._id},columns:N,pageSize:100,autoHeight:!0,rows:(null===S||void 0===S?void 0:S.journey)||[]})})}),(0,p.jsx)("div",{className:"station-page--pagination",children:100===(null===S||void 0===S||null===(e=S.journey)||void 0===e?void 0:e.length)?(0,p.jsx)(l.Z,{count:Math.round((null===S||void 0===S?void 0:S.totalJourney)/100)||0,variant:"outlined",color:"primary",page:x,onChange:function(n,e){w(e),r((0,f.R)(e))}}):""})]})}},7577:function(n,e,r){r.d(e,{Gj:function(){return t},pQ:function(){return i},pi:function(){return a},sX:function(){return o},t4:function(){return u}});var t=function(n){return Math.round(n/100)/10},o=function(n){var e=new Date(null);return e.setSeconds(n),e.toISOString().substr(11,8)},i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=n.reduce((function(n,e){return n+(null===e||void 0===e?void 0:e.covered_distance)}),0),r=(t(e)/(null===n||void 0===n?void 0:n.length)).toFixed(2);return r},u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Object.values(n.reduce((function(n,e){var r=e.return_station_name;return n[r]=n[r]||{return_station_name:r,count:0},n[r].count++,n}),Object.create(null))),r=[].concat(e).sort((function(n,e){return e.count-n.count}));return null===r||void 0===r?void 0:r.slice(0,5)},a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log("array",n);var e=Object.values(n.reduce((function(n,e){var r=e.departure_station_name;return n[r]=n[r]||{departure_station_name:r,count:0},n[r].count++,n}),Object.create(null))),r=[].concat(e).sort((function(n,e){return e.count-n.count}));return null===r||void 0===r?void 0:r.slice(0,5)}}}]);
//# sourceMappingURL=712.a5b3965d.chunk.js.map